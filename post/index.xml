<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Code Chronicles (mostly)</title>
    <link>https://codicles.org/post/</link>
    <description>Recent content in Posts on Code Chronicles (mostly)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 05 Nov 2025 00:00:00 +0100</lastBuildDate><atom:link href="https://codicles.org/post/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>NextJS isn&#39;t all that bad</title>
      <link>https://codicles.org/post/nextjs-isnt-all-that-bad/</link>
      <pubDate>Wed, 05 Nov 2025 00:00:00 +0100</pubDate>
      
      <guid>https://codicles.org/post/nextjs-isnt-all-that-bad/</guid>
      
      <description>&lt;p&gt;Though I am primarily a backend/system developer, I have worked with frontend for a long time. Coffeescript, react when it was just in beta, rails, react when it matured a bit more, etc.&lt;/p&gt;
&lt;p&gt;Many a time, my work there had been shooting in the dark, because one (or I) couldn&amp;rsquo;t easily find the rhyme/reason in those things.&lt;/p&gt;
&lt;p&gt;I have always gotten things done, and to the client&amp;rsquo;s satisfaction&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;. But not always to my satisfaction.&lt;/p&gt;
&lt;p&gt;And all that started to change with NextJS and the new apis of react. It is very well structured that my backend mind can also grasp how things work, and program it well (and fast) to my and the client&amp;rsquo;s satisfaction.&lt;/p&gt;
&lt;p&gt;Many speak against NextJS (and I am aware of the drawbacks). But we have a pretty large, well functioning frontend for Talix &amp;ndash; all built in NextJS.&lt;/p&gt;
&lt;p&gt;We haven&amp;rsquo;t had any mentionable deployment issues that blocked us. We just have a simple docker based installation and that has worked for the last 2+ years without any big glitch.&lt;/p&gt;
&lt;p&gt;Since we (or I) are (am) heavy supporters of typescript, surely all the NextJS projects are in Typescript too.&lt;/p&gt;
&lt;p&gt;An additional gift from the Gods is tailwind. CSS had been another painful thing I hated. But with Tailwind, I &amp;ldquo;understand&amp;rdquo; even that better.&lt;/p&gt;
&lt;p&gt;There are a ton of resources online, but what got me started was/were some of the courses from &lt;a href=&#34;https://www.udemy.com/user/robin-lebhar/&#34;&gt;https://www.udemy.com/user/robin-lebhar/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;And now, finally with AI assistants in the IDE, I am possibly 20 times more productive than how I was 8 years ago &amp;ndash; and I thank NextJS/Typescript/Tailwind/React for that growth.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;with one excpetion where we had a combination of a Hugo website with login where PHP had to be used to connect to their internal systems, and what not. That one was weird.&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
      
    </item>
    
    <item>
      <title>Account Mapping to SKR04 with OpenAI Assistant</title>
      <link>https://codicles.org/post/account-mapping-to-skr-04-with-open-ai-assistant/</link>
      <pubDate>Mon, 27 Jan 2025 00:00:00 +0100</pubDate>
      
      <guid>https://codicles.org/post/account-mapping-to-skr-04-with-open-ai-assistant/</guid>
      
      <description>&lt;p&gt;For the uninitiated in accounting, and tax reporting: though it must be absolutely standardised, everyone uses their own accounting &amp;ldquo;standards&amp;rdquo; (at the very least, they use their own accounting descriptions, and numbers)&lt;/p&gt;
&lt;p&gt;And when I say account numbers, it is not bank account numbers I mean. Every/any thing that happens in accouting goes to and comes from one or another account. That&amp;rsquo;s something we&amp;rsquo;ll address another day.&lt;/p&gt;
&lt;p&gt;Coming to the issue at hand: When clients report their accounting to tax consultants (who then must calculate the tax adjusted P&amp;amp;L&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; and Balance Sheet), the account numbering is based on the clients internal system.&lt;/p&gt;
&lt;p&gt;The tax consultant then has to take these, map them to the accepted standard&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; - SKR (StandardKontenRahmen) in Germany.Â &lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;As we have been working a lot with taxation - though this problem does not affect us directly - we decided to spend half a day on this. The members of our team were @Steffen, @Dimitar, @Pam, and yours truly.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How hard can it be?&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;poor-man-s-attempt&#34;&gt;Poor man&amp;rsquo;s attempt&lt;/h2&gt;
&lt;p&gt;It all starts with taking the client&amp;rsquo;s input (it is always excel) in on hand, and the SKR04&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;4&lt;/a&gt;&lt;/sup&gt; definitions on the other hand.&lt;/p&gt;
&lt;p&gt;A simple loop inside a loop was the first attempt. Loop through the lists and just compare all pairs to finally sort them based on (string) similarity.&lt;/p&gt;
&lt;p&gt;How rudimentary this may seem, it was actually somewhat effective, and already gave us a number of matches in the best match list. At least enough to rais our confidence.&lt;/p&gt;
&lt;p&gt;But it wasn&amp;rsquo;t enough in the general sense, and was a failure when the client input was in English (failed matches all around)&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s the code&lt;sup id=&#34;fnref:5&#34;&gt;&lt;a href=&#34;#fn:5&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#00a000&#34;&gt;get_matching_account_names&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    account_names: &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;], datev_account_names: &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;) &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#a2f&#34;&gt;tuple&lt;/span&gt;[
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Initialize dictionaries for different match levels&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    match_levels &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;best&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;tuple&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;float&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]]](),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;close&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;tuple&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;float&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]]](),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;okay&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;tuple&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;float&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]]](),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;rest&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#a2f&#34;&gt;dict&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;tuple&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;float&lt;/span&gt;, &lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]]](),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Define similarity thresholds&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    thresholds &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;best&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#666&#34;&gt;0.95&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;close&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#666&#34;&gt;0.8&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;okay&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#666&#34;&gt;0.6&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;for&lt;/span&gt; account_name &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; account_names:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Initialize lists for each match level&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;for&lt;/span&gt; level &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; match_levels:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            match_levels[level][account_name] &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;for&lt;/span&gt; datev_account_name &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; datev_account_names:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            similarity &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; similar(account_name, datev_account_name)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; similarity &lt;span style=&#34;color:#666&#34;&gt;&amp;gt;=&lt;/span&gt; thresholds[&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;best&amp;#34;&lt;/span&gt;]:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                match_levels[&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;best&amp;#34;&lt;/span&gt;][account_name]&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;append(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (similarity, datev_account_name)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;elif&lt;/span&gt; similarity &lt;span style=&#34;color:#666&#34;&gt;&amp;gt;=&lt;/span&gt; thresholds[&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;close&amp;#34;&lt;/span&gt;]:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                match_levels[&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;close&amp;#34;&lt;/span&gt;][account_name]&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;append(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (similarity, datev_account_name)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;elif&lt;/span&gt; similarity &lt;span style=&#34;color:#666&#34;&gt;&amp;gt;=&lt;/span&gt; thresholds[&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;okay&amp;#34;&lt;/span&gt;]:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                match_levels[&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;okay&amp;#34;&lt;/span&gt;][account_name]&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;append(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (similarity, datev_account_name)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;else&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                match_levels[&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;rest&amp;#34;&lt;/span&gt;][account_name]&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;append(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (similarity, datev_account_name)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Sort the lists by similarity&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;for&lt;/span&gt; level &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; match_levels:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            match_levels[level][account_name] &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; sort_by_similarity(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                match_levels[level][account_name]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    best, close, okay, rest &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        create_dict_to_list_from_dict_to_list_of_tuples(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            remove_keys_with_no_matches(match_levels[level])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;for&lt;/span&gt; level &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; [&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;best&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;close&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;okay&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;rest&amp;#34;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;return&lt;/span&gt; best, close, okay, rest
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;rich-man-s-attempt&#34;&gt;Rich man&amp;rsquo;s attempt&lt;/h2&gt;
&lt;p&gt;Now that we were thrilled with two lists and two loops, we were ready to take the big guns. Throw everything to an LLM (OpenAI) and then get the result.&lt;/p&gt;
&lt;p&gt;The result was quite underwhelming. It wasn&amp;rsquo;t too bad, but compared to what we received from simple loops, LLM didn&amp;rsquo;t impress us.&lt;/p&gt;
&lt;p&gt;What impressed us was the speed with which our billing went up. With every request (test) we made, we could see our usage stats in OpenAI billing dashboard.&lt;/p&gt;
&lt;p&gt;The cost effectiveness (or lack thereof) discouraged us from continuing in this direction&lt;/p&gt;
&lt;p&gt;The code is here though&lt;sup id=&#34;fnref:6&#34;&gt;&lt;a href=&#34;#fn:6&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;6&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Step 3: Function to compare account descriptions using the Chat Completion API&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#00a000&#34;&gt;find_best_match&lt;/span&gt;(new_account_desc: &lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;, datev_accounts: &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]) &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#a2f&#34;&gt;list&lt;/span&gt;[&lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;]:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Prepare the conversation prompt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    system_message &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;You are an expert assistant that matches account descriptions to find the 3 closest semantic matches. Just provide the description of the new accounts without any further explanation or numbering, just split them by semi colon&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user_message &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;Here is a list of account descriptions:&lt;/span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#b68;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39;, &amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;join(datev_accounts)&lt;span style=&#34;color:#b68;font-weight:bold&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#b44&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;Match the following description to the closest one in the list: &amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#b68;font-weight:bold&#34;&gt;{&lt;/span&gt;new_account_desc&lt;span style=&#34;color:#b68;font-weight:bold&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Send request to OpenAI API&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    response &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; openai&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;chat&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;completions&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;create(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        model&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;gpt-4o&amp;#34;&lt;/span&gt;,  &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Replace with gpt-3.5-turbo if preferred&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        messages&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;[
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            {&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;system&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: system_message},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            {&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: user_message},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        max_tokens&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;100&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;# Extract and return the model&amp;#39;s response&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;return&lt;/span&gt; response&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;choices[&lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;message&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;content&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;strip()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;the-pragmatist-s-approach&#34;&gt;The pragmatist&amp;rsquo;s approach&lt;/h2&gt;
&lt;p&gt;WIP&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;Profit and Loss&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;Accepted accounting standard is set by DATEV (effectively)&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34;&gt;
&lt;p&gt;Our story happens in Germany&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:4&#34;&gt;
&lt;p&gt;SKR04 was our chosen version of SKR as the cases we usually deal with had to do with this version.&amp;#160;&lt;a href=&#34;#fnref:4&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:5&#34;&gt;
&lt;p&gt;In the time restricted hackathon day, we didn&amp;rsquo;t care much about &amp;ldquo;style&amp;rdquo;&amp;#160;&lt;a href=&#34;#fnref:5&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:6&#34;&gt;
&lt;p&gt;Perhaps we should have worked more on our prompt; But for usage stats we saw, we stopped pretty quickly.&amp;#160;&lt;a href=&#34;#fnref:6&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
      
    </item>
    
    <item>
      <title>Server requirements</title>
      <link>https://codicles.org/post/server-requirements/</link>
      <pubDate>Sun, 06 Aug 2023 00:00:00 +0200</pubDate>
      
      <guid>https://codicles.org/post/server-requirements/</guid>
      
      <description>&lt;p&gt;Every now and then I have to create a new server. Sometimes in Python, sometimes in Javascript (lately more Typescript), sometimes it is Go. Rarely Rails (at least lately). Over time, the following are my self-inflicted requirements for a nice server. Just putting it out here for future reference. Also, I might just create a series about creating such a server (perhaps in Golang?)&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Database connection/s
&lt;ul&gt;
&lt;li&gt;of course at least one type should be configured.&lt;/li&gt;
&lt;li&gt;but possibly with choice of environments - develop on psql, testing on sqlite (for example)
&lt;ul&gt;
&lt;li&gt;I&amp;rsquo;ve found it quite nice to have local tests that can be run on against an in-memory sqlite DB&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Migration (either automatic on start, or with a simple trigger)
&lt;ul&gt;
&lt;li&gt;CRUD for entities, and similar things&lt;/li&gt;
&lt;li&gt;NOTE that this might get tricky with ability to run against different DBs.
&lt;ul&gt;
&lt;li&gt;In conflict, I think we stick with the DB of our choice and migrations win&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;/health endpoint
&lt;ul&gt;
&lt;li&gt;Should return something like &lt;code&gt;{ status: &amp;quot;Ok&amp;quot;, db_ping: &amp;quot;43ns&amp;quot;, version: &amp;quot;x.yy.zzz&amp;quot; }&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;The DB ping is quite useful at times (if you ping takes longer, you can directly see there&amp;rsquo;s a bit of load there)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;NO global variables (must I explain?)&lt;/li&gt;
&lt;li&gt;NOTHING hardcoded
&lt;ul&gt;
&lt;li&gt;Env variables are to be read only in the main (entry method)&lt;/li&gt;
&lt;li&gt;And proper dependency injection&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Swagger &lt;strong&gt;generated with annotations&lt;/strong&gt;, not with a large yaml/json file
&lt;ul&gt;
&lt;li&gt;Would love if it is a smart/er system which generates from code itself ;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;One method &lt;em&gt;createServer(params)&lt;/em&gt; should return
&lt;ul&gt;
&lt;li&gt;a server we can run, and&lt;/li&gt;
&lt;li&gt;a shutDownServer which will gracefully shut things down
&lt;ul&gt;
&lt;li&gt;(optional) proper disconnection from DB as well&lt;/li&gt;
&lt;li&gt;And to be called when we receive signals to die/kill&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Middle/After-ware which logs
&lt;ul&gt;
&lt;li&gt;Request arrival
&lt;ul&gt;
&lt;li&gt;possibility to turn on body/header logging&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Request completion with time taken
&lt;ul&gt;
&lt;li&gt;possibility to turn on output logging&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;The possibility to add an arbitrary middleware
&lt;ul&gt;
&lt;li&gt;For example, something to add a dummy-header to the request.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Unit tests
&lt;ul&gt;
&lt;li&gt;Anything which is NOT an api call should be testable with unit tests
&lt;ul&gt;
&lt;li&gt;(optional) If possible the migration method should be tested too&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Integration/API tests
&lt;ul&gt;
&lt;li&gt;All apis should be testable (/health included)
&lt;ul&gt;
&lt;li&gt;Test the response code, and verify with another call, but not by looking into DB.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Create database at start&lt;/li&gt;
&lt;li&gt;Connect to database (in memory is fine too)&lt;/li&gt;
&lt;li&gt;NO tests shall call endpoints directly with path.
&lt;ul&gt;
&lt;li&gt;They shall be called as methods of server, or server like object.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;On test completion, shutdown the server, disconnect the database
&lt;ul&gt;
&lt;li&gt;a nice teardown (though our db might be in memory or temporary file)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Internationalisation / Localisation
&lt;ul&gt;
&lt;li&gt;The request shall be able to send `Accepted-Language` header, and the response must respect it.&lt;/li&gt;
&lt;li&gt;Should have some kind of localised strings file.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Project shall be
&lt;ul&gt;
&lt;li&gt;structured to
&lt;ul&gt;
&lt;li&gt;entry-point.&amp;lt;java|ts|go|js|py&amp;gt;, (say main)&lt;/li&gt;
&lt;li&gt;and folders like routes/, models/, controllers/, repository/ (business logic), and /services&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;with rather limited package dependency&lt;/li&gt;
&lt;li&gt;compile/runnable and testable with simple commands, small script, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Basic auth endpoints, sessions, tokens, etc. without JWT (I personally dislike JWT)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;ndash; sillyfellow on 2023-08-06 (Sun 22:47)&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Git pain optimisation</title>
      <link>https://codicles.org/post/git-pain-optimisation/</link>
      <pubDate>Wed, 26 Oct 2022 00:00:00 +0200</pubDate>
      
      <guid>https://codicles.org/post/git-pain-optimisation/</guid>
      
      <description>&lt;p&gt;I have been thinking a bit about git and the tools that help us with
it.&lt;/p&gt;
&lt;p&gt;Git is a super powerful tool, but with quite complicated ways of
working.&lt;/p&gt;
&lt;p&gt;And to most of the developers, the interface in the command line is
hard.&lt;/p&gt;
&lt;p&gt;That usually leads them to using some UI which claims to make things
easier by abstracting details away (that is, the UI claims to do
the magic).&lt;/p&gt;
&lt;p&gt;All what I have seen so far tells me that this results in quite
unexpected behaviour (well, funnily enough sometimes we don&amp;rsquo;t even
know what is the expected behaviour). And every time this unexpected
things come along, one has to spend a good amount of time to fix it
(and that is possible only with the CLI)&lt;/p&gt;
&lt;p&gt;To make it worse for me, in most of the projects I&amp;rsquo;m in, the person
who bears this pain is yours truly.&lt;/p&gt;
&lt;p&gt;This is mainly because the developers of the UI tool are probably
confused too, and finds it hard to communicate with the users
correctly - resulting in a tool which claims to do magic, but performs
the wrong trick.&lt;/p&gt;
&lt;p&gt;The one and only solution I have seen which works (not claiming it is
easy), and completely avoids all or any kind of surprise is the git
command line.&lt;/p&gt;
&lt;p&gt;I use perhaps 2% of the power of git, but only from CLI and
very very rarely do I end up in a soup.&lt;/p&gt;
&lt;p&gt;My regular pain is probably ever so little more than the pain of the
UI tool user. But that is my worst pain, but never do I have to suffer
anything worse.&lt;/p&gt;
&lt;p&gt;So, please go ahead and learn those 10 git cli commands and get out of
the habit of using a fancy tool which merges in the wrong direction or
rebases incorrectly to drive you mad. That&amp;rsquo;ll pay off and keep your
pain minimal.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>How do I blog?</title>
      <link>https://codicles.org/post/blogging-howto/</link>
      <pubDate>Sun, 02 Oct 2022 00:00:00 +0200</pubDate>
      
      <guid>https://codicles.org/post/blogging-howto/</guid>
      
      <description>&lt;p&gt;I blog directly from Emacs (Org mode), using hugo-markdown export, and easy hugo.&lt;/p&gt;
&lt;p&gt;Org mode capture allows me to directly write to my &lt;code&gt;entries.org&lt;/code&gt; file, which I then export the usual way (C-c C-e), but into the markdown file in the posts folder in my hugo website.&lt;/p&gt;
&lt;p&gt;And with easy-hugo, I just publish it. That&amp;rsquo;s it :)&lt;/p&gt;
&lt;p&gt;What I shall not forget is giving a proper name in the &lt;code&gt;entries.org&lt;/code&gt; so that all is kept in order.&lt;/p&gt;
&lt;p&gt;Of course, everything is in git/hub as well.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Setup a new server (Hetzner, EC2, etc.)</title>
      <link>https://codicles.org/post/server-setup/</link>
      <pubDate>Thu, 10 Feb 2022 00:00:00 +0100</pubDate>
      
      <guid>https://codicles.org/post/server-setup/</guid>
      
      <description>&lt;p&gt;TODO&lt;/p&gt;
&lt;p&gt;&amp;ndash; sillyfellow @ &lt;span class=&#34;timestamp-wrapper&#34;&gt;&lt;span class=&#34;timestamp&#34;&gt;[2022-02-10 Thu 00:16]&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Hello World</title>
      <link>https://codicles.org/post/helloworld/</link>
      <pubDate>Mon, 03 Jan 2022 00:00:00 +0100</pubDate>
      
      <guid>https://codicles.org/post/helloworld/</guid>
      
      <description>&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#080&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#080&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#0b0;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#00a000&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#00a000&#34;&gt;printf&lt;/span&gt;(&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;Hello World!&lt;/span&gt;&lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&amp;ndash; sillyfellow @ &lt;span class=&#34;timestamp-wrapper&#34;&gt;&lt;span class=&#34;timestamp&#34;&gt;[2022-01-03 Mon 09:14]&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>A bit of python</title>
      <link>https://codicles.org/post/python-snippet/</link>
      <pubDate>Mon, 27 Dec 2021 00:00:00 +0100</pubDate>
      
      <guid>https://codicles.org/post/python-snippet/</guid>
      
      <description>&lt;p&gt;Snippet!&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;os&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#00a000&#34;&gt;get_env_variable&lt;/span&gt;(name) &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#a2f&#34;&gt;str&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;return&lt;/span&gt; os&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;environ[name]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#d2413a;font-weight:bold&#34;&gt;KeyError&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        message &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b44&#34;&gt;&amp;#34;Expected environment variable &amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#b68;font-weight:bold&#34;&gt;{}&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39; not set.&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;format(name)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;raise&lt;/span&gt; &lt;span style=&#34;color:#d2413a;font-weight:bold&#34;&gt;Exception&lt;/span&gt;(message)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&amp;ndash; sillyfellow @ &lt;span class=&#34;timestamp-wrapper&#34;&gt;&lt;span class=&#34;timestamp&#34;&gt;[2021-12-27 Mon 15:28]&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Setup auto deployment from Private Github repo to EC2 instance</title>
      <link>https://codicles.org/post/gh-private-to-aws-ect/</link>
      <pubDate>Thu, 10 Feb 2022 00:00:00 +0100</pubDate>
      
      <guid>https://codicles.org/post/gh-private-to-aws-ect/</guid>
      
      <description>&lt;p&gt;TODO&lt;/p&gt;
&lt;p&gt;&amp;ndash; sillyfellow @ &lt;span class=&#34;timestamp-wrapper&#34;&gt;&lt;span class=&#34;timestamp&#34;&gt;[2022-02-10 Thu 00:17]&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Refresh token (access token)</title>
      <link>https://codicles.org/post/auth-session-tokens-refresh-etc/</link>
      <pubDate>Fri, 01 Dec 2023 16:24:03 +0100</pubDate>
      
      <guid>https://codicles.org/post/auth-session-tokens-refresh-etc/</guid>
      
      <description>&lt;ul&gt;
&lt;li&gt;Do not use JWT (Just DON&amp;rsquo;T)&lt;/li&gt;
&lt;li&gt;Always have a sessions table
&lt;ul&gt;
&lt;li&gt;Which belongs to the USER
&lt;ul&gt;
&lt;li&gt;i.e., sessions table has a user_id column&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Have access_token and refresh_token
&lt;ul&gt;
&lt;li&gt;ideally as varchar(256), not text&lt;/li&gt;
&lt;li&gt;do not allow them to grow&lt;/li&gt;
&lt;li&gt;security shall be mostly based on rotation, not purely on length&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Must have access_token_expires_at and refresh_token_expires at columns (both datetime, and keep them as UTC)
&lt;ul&gt;
&lt;li&gt;make sure to have these columns calculated during the creation of the session. Do not think of doing &amp;ldquo;time-math&amp;rdquo; for calculating expiry.
&lt;ul&gt;
&lt;li&gt;Because, you may login with one server, but the next server you have the auth checked might have a different time stamp/zone&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;access/refresh tokens shall be unique&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;From the above, it becomes possible to have multiple active sessions for one user.
&lt;ul&gt;
&lt;li&gt;If that is not desired, restrict that at code level, not at DB level&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Generate random strings for access token and refresh token
&lt;ul&gt;
&lt;li&gt;keep them URLsafe (you&amp;rsquo;ll thank me when you have a mobile app)&lt;/li&gt;
&lt;li&gt;Keep them about 256 char long
&lt;ul&gt;
&lt;li&gt;no longer&lt;/li&gt;
&lt;li&gt;no shorter&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Make access_expiry in a few minutes, and refresh_expiry in a few days&lt;/li&gt;
&lt;li&gt;Standard auth is having authorisation header
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Authorisation: Bearer &amp;lt;access-token&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Refresh token will require
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Authorisation: Bearer &amp;lt;refresh-token&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Deal with Auth always in a middleware and keep the logged in user, or the session found by looking up the access_token (or refresh_token) in the sessions table&lt;/li&gt;
&lt;li&gt;On refresh, delete the current session object, and create a new one with new
&lt;ul&gt;
&lt;li&gt;access_token, and new expiry in a few minutes&lt;/li&gt;
&lt;li&gt;refresh_token, with new expiry in a few days&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Disallow refresh if the refresh token is already expired&lt;/li&gt;
&lt;li&gt;So, if a user logs in and is inactive for a few days, the refresh token expires, and they will have to login fresh again&lt;/li&gt;
&lt;li&gt;But as long as the user does a &amp;ldquo;refresh&amp;rdquo; before the refresh-token is expired, they will have sessions alive always.&lt;/li&gt;
&lt;/ul&gt;
</description>
      
    </item>
    
  </channel>
</rss>
